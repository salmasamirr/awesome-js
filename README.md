# Awesome JS Monorepo

A lightweight monorepo for Angular libraries and their demo apps. It currently contains the `@awesome/charts` library and an example application that consumes it.

## Repository layout

- packages/charts — Angular library: `@awesome/charts`
- dist/charts — Build output of the charts library (generated by ng-packagr)
- examples/charts — Angular demo app that imports `@awesome/charts`

## Prerequisites

- Node.js 20+
- npm 10+
- PowerShell on Windows (or any POSIX shell on macOS/Linux)

## Initial Setup

This monorepo does not have a root `package.json`. You need to install dependencies for each package you intend to work on.

For the charts library and its example app, run the following from the repository root:

```bash
# Install dependencies for the library
cd packages/charts && npm ci --no-audit --no-fund

# Install dependencies for the example app
cd ../../examples/charts && npm ci --no-audit --no-fund
```

This produces `dist/charts` with FESM bundles and type definitions.

2) Run the demo app

```bash
cd ../../examples/charts; npm ci --no-audit --no-fund; npm start
```

The demo resolves `@awesome/charts` via a TypeScript path alias in `examples/charts/tsconfig.json`:

```json
{
  "compilerOptions": {
    "paths": {
      "@awesome/charts": ["../../dist/charts"]
    }
  }
}
```

In code you can import from the library like:

```ts
import { echartsBaseModel, echartsDerivativeModel, LLMService } from '@awesome/charts';
```

## Add another package and a matching example

Follow this pattern to add a new library under `packages/` and a corresponding demo under `examples/`.

### A) Create the library

1. Create folder `packages/<new-lib>` with:
   - `package.json` (include a `build` script)
   - `ng-package.json`
   - `src/public-api.ts` and sources under `src/lib/`
2. Example `ng-package.json`:

```json
{
  "$schema": "../../node_modules/ng-packagr/ng-package.schema.json",
  "dest": "../../dist/<new-lib>",
  "lib": { "entryFile": "src/public-api.ts" },
  "allowedNonPeerDependencies": []
}
```

3. Minimal `package.json`:

```json
{
  "name": "@awesome/<new-lib>",
  "version": "0.0.1",
  "scripts": { "build": "ng-packagr -p ng-package.json" },
  "peerDependencies": {
    "@angular/common": "^20.0.0",
    "@angular/core": "^20.0.0"
  },
  "devDependencies": { "ng-packagr": "^20.3.0" }
}
```

4. Build the library:

```bash
cd packages/<new-lib>; npm ci --no-audit --no-fund; npm run build
```

### B) Create the example app

1. Create `examples/<new-lib>-example` (Angular app). Configure `tsconfig.json` to map the library:

```json
{
  "compilerOptions": {
    "paths": { "@awesome/<new-lib>": ["../../dist/<new-lib>"] }
  }
}
```

2. Import in the example code:

```ts
import { SomeExport } from '@awesome/<new-lib>';
```

3. Run the example:

```bash
cd examples/<new-lib>-example; npm ci --no-audit --no-fund; npm start
```

Notes
- Always build the library first so the example resolves `../../dist/<new-lib>`.
- `dist/` and `node_modules/` are ignored by Git via the root `.gitignore`.
